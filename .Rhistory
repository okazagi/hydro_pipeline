use_git()
install.packages("git")
fs::dir_create(c(
"data_raw",
"date_clean",
"R",
"scripts"
))
file.create("R/functions_import.R")
file.create("R/functions_clean.R")
use_git_ignore(c(
"data_raw/",
"data_clean/",
"_targets/",
".Renviron"
))
RStudio.Version()
install.packages("git")
library(usethis)
use_git_ignore(c(
"data_raw/",
"data_clean/",
"_targets/",
".Renviron"
))
install.packages("renv")
renv::init()
install.packages(c(
"targets",      # The pipeline manager
"tarchetypes",  # Helpers for targets
"arrow",        # Parquet file handling
"tidyverse",    # Data manipulation
"pins",         # Data versioning/storage
"reticulate",   # Python integration
"dataRetrieval",# USGS data
"snotelr"       # NRCS data (check if available on CRAN, otherwise use remotse)
))
renv::install("igraph")
renv::snapshot()
usethis::edit_r_environ()
library(usethis)
install.packages("usethis")
library(usethis)
usethis::edit_r_environ()
library(usethis)
usethis::use_github()
usethis::create_github_token()
gitcreds::gitcreds_set()
usethis::use_github()
usethis::use_github()
usethis::edit_r_environ()
library(dataRetrieval)
library(dataretrieval)
library(dataRetrieval)
renv::init()
renv::status()
renv::install("dataRetrieval")
?read_waterdata_ts_meta
library(dataRetrieval)
library(dataRetrieval)
library(dataRetrieval)
.libPaths()
renv::install("dataRetrieval")
renv::install("dataRetrieval")
library(dataRetrieval)
?read_waterdata_ts_meta
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
site <- 392116106443101
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
site <- USGS-392116106443101
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
site <- CO - USGS-392116106443101
site <- CO-USGS-392116106443101
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
site <- USGS-392116106443101
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
site <- USGS-392116106443101
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
meta_multi <- read_waterdata_ts_meta(monitoring_location_id = site,
parameter_code = c("330841_74207", "330840_74207", "330839_74207"),
properties = c("monitoring_location_id",
"parameter_code",
"begin",
"end",
"time_series_id"),
skipGeometry = TRUE)
library(dataRetrieval)
site <- USGS-392116106443101
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
site <- "USGS-392116106443101"
meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
library(tidyverse)
renv::install("tidyverse")
library(tidyverse)
view(meta_1)
View(meta_1)
View(meta_1)
source("scripts/retrieve_data.R")
source("scripts/usgs_retrieve.R")
# Set your parameters
my_site <- "USGS-392116106443101"
start <- "2023-06-28"
end   <- "2023-07-01" # Short range for testing
reudi <- retrieve_station_data(my_site, start, end)
head(reudi)
View(reudi)
View(meta_1)
# Set your parameters
my_site <- "USGS-392116106443101"
start <- "2023-06-28"
end   <- "2025-12-16" # Short range for testing
reudi <- retrieve_station_data(my_site, start, end)
View(reudi)
View(meta_1)
View(meta_1)
write_csv(reudi, "reudi_meta.csv")
write_csv(meta_1, "reudi_meta.csv")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
renv::status()
renv::activate()
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
renv::status()
renv::snapshot()
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
View(retrieve_station_data)
renv::status()
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
raw_file_path <- retrieve_station_data("USGS-12345678", "2023-06-29", "2025-12-17")
raw_file_path <- retrieve_station_data("USGS-12345678", "2023-06-29", "2025-12-17")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
View(retrieve_station_data)
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
raw_file_path <- retrieve_station_data("USGS-12345678", "2023-06-29", "2025-12-17")
source("~/hydro_pipeline/scripts/usgs_transform.R")
process_usgs_data("data_raw/USGS_12345678_raw.csv")
raw_file_path <- retrieve_station_data("USGS-392116106443101", "2023-06-29", "2025-12-17")
process_usgs_data("data_raw/USGS_392116106443101_raw.csv")
source("~/hydro_pipeline/scripts/usgs_transform.R")
retrieve_station_data("USGS-12345678", "2023-06-29", "2025-12-17")
retrieve_station_data("USGS-392116106443101", "2023-06-29", "2025-12-17")
process_usgs_data("data_raw/USGS_392116106443101_raw.csv")
site <- "USGS-391851106365401"
seller_meta_1 <- read_waterdata_ts_meta(monitoring_location_id = site)
View(seller_meta_1)
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/usgs_column_get.R")
source("~/hydro_pipeline/scripts/usgs_column_get.R")
source("~/hydro_pipeline/scripts/usgs_transform.R")
source("~/hydro_pipeline/scripts/usgs_retrieve.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/usgs_transform.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/usgs_transform.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/usgs_metadata.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/usgs_startdate.R")
source("~/hydro_pipeline/scripts/run_batch.R")
source("~/hydro_pipeline/scripts/run_batch.R")
install.packages("awdb")
renv::snapshot()
library(awdb)
renv::snapshot()
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
install.packages("here")
renv::snapshot()
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
library(sf)
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
source("~/hydro_pipeline/scripts/nwcc_metadata.R")
View(data)
View(data[[17]][[1]])
library(httr)
library(jsonlite)
# The reference-data endpoint
url <- "https://wcc.sc.egov.usda.gov/awdbRestApi/services/v1/references/elements"
# Fetch the data
response <- GET(url)
elements <- fromJSON(content(response, "text", encoding = "UTF-8"))
# View the codes and descriptions
# This creates a helpful lookup table
lookup_table <- elements[, c("elementCode", "name", "storedUnitCode")]
library(httr)
library(jsonlite)
# The reference-data endpoint
url <- "https://wcc.sc.egov.usda.gov/awdbRestApi/services/v1/references/elements"
# Fetch the data
response <- GET(url)
elements <- fromJSON(content(response, "text", encoding = "UTF-8"))
# View the codes and descriptions
# This creates a helpful lookup table
lookup_table <- elements[, c("elementCode", "name", "storedUnitCode")]
element_list <- get_references(reference_type = "elements")
View(element_list)
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_request.R")
source("~/hydro_pipeline/scripts/nwcc_transform.R")
renv::status()
renv::restore()
source("~/project-hub/hydro_pipeline/scripts/nwcc_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/nwcc_transform.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/nwcc_transform.R", echo=TRUE)
install.packages("optparse")
Rscript hydro_pipeline/scripts/fetch_data.R --start=202509240000
Rscript hydro_pipeline/scripts/synoptic_request.R --start=202509240000
Rscript?
?Rscript
renv::snapshot()
usethis::edit_r_environ
install.packages("usethis")
usethis::edit_r_environ
usethis::edit_r_environ(hydro_pipeline)
source("~/project-hub/hydro_pipeline/scripts/synoptic_transform.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/synoptic_transform.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/synoptic_transform.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/synoptic_transform.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/synoptic_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/synoptic_transform.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/synoptic_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/combine_rfgls.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/nwcc_transform.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/nwcc_transform.R", echo=TRUE)
renv::snapshot
renv::snapshot()
source("~/project-hub/hydro_pipeline/scripts/synoptic_request.R", echo=TRUE)
library(here)
source("~/project-hub/hydro_pipeline/scripts/old_to_masterSchema.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/rfglr_combine.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/rfglr_combine.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/check_data_graphs.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/datacamp_format_to_masterSchema.R", echo=TRUE)
MASTER_COLS <- c(
"Date_UTC", "Time_UTC", "Station_ID", "Station_Name",
"AirTemp_C", "RH", "Barometric_Pressure",
"Epithermal_Neutron_counts", "Thermal_Neutron_counts", "Blw_Grnd_Epithermal_Neutron_counts",
"SoilTemp_C_5cm", "SoilTemp_C_10cm", "SoilTemp_C_20cm", "SoilTemp_C_50cm",
"WaterCont_5cm_m3m3", "WaterCont_10cm_m3m3", "WaterCont_20cm_m3m3", "WaterCont_50cm_m3m3",
"Rain_cm", "Dewpoint_C", "DataFlag",
"WaterCont_5cm_m3m3_2", "WaterCont_20cm_m3m3_2", "WaterCont_50cm_m3m3_2",
"WaterCont_100cm_m3m3", "SoilTemp_C_100cm"
)
source("~/project-hub/hydro_pipeline/scripts/datacamp_format_to_masterSchema.R", echo=TRUE)
library(readr)
library(lubridate)
# Load the file again
df <- read_csv("old_data/RFGLR_2024_migrated_v1.csv")
# Find where the Date_UTC is NA (the failures)
failures <- df[is.na(df$Date_UTC), ]
head(failures)
source("~/project-hub/hydro_pipeline/scripts/datacamp_format_to_masterSchema.R", echo=TRUE)
# 1. Read the original file again
raw_check <- read_csv("path/to/your/second_legacy_file.csv", show_col_types = FALSE)
# 1. Read the original file again
raw_check <- read_csv("old_data/RFGLR_2024_legacy_v1.csv", show_col_types = FALSE)
# 2. Try the parse again to find the NAs
parsed_dates <- lubridate::parse_date_time(raw_check$DATETIMEUTC,
orders = c("ymd HMS", "ymd HM", "mdy HMS", "mdy HM"),
tz = "UTC")
# 3. Show the raw text of the first 10 failures
unique(raw_check$DATETIMEUTC[is.na(parsed_dates)])[1:10]
source("~/project-hub/hydro_pipeline/scripts/datacamp_format_to_masterSchema.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/check_rfglr_2024.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/datacamp_format_to_masterSchema.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/RFGLR_Merge_all.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/RFGLR_Merge_all.R", echo=TRUE)
# Load the 2025 file
df_2025 <- read_csv("old_data/RFGLR_2025_master.csv", show_col_types = FALSE)
# Load the 2025 file
df_2025 <- read_csv("old_data/RFGLR_2025.csv", show_col_types = FALSE)
# Find the rows that failed to parse
failures_2025 <- df_2025[is.na(ymd_hms(paste(df_2025$Date_UTC, df_2025$Time_UTC))), ]
# Look at the first few
head(failures_2025)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
renv::load()
source("~/project-hub/hydro_pipeline/scripts/synoptic_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
renv::load()
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
usethis::edit_r_environ()
usethis::edit_r_environ(scope = "hydro_pipeline")
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
Sys.getenv("LICOR_TOKEN")
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
renv::load()
Sys.getenv("LICOR_TOKEN")
usethis::edit_r_environ()
usethis::edit_r_environ("asadehaan", "hydro_pipeline")
usethis::edit_r_environ(hydro_pipeline)
usethis::edit_r_environ("hydro_pipeline")
usethis::edit_r_environ("asadehaan","hydro_pipeline")
usethis::edit_r_environ(scope = "project")
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_current_status.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_current_status.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_request.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
install.packages("janitor")
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
parse_date_time("10/01/24 00:00:00 +0000", orders = "mdy HMS z")
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
problems(raw_df)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
source("~/project-hub/hydro_pipeline/scripts/licor_transform_legacy.R", echo=TRUE)
